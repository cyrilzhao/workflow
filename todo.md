# TODO LIST

- [x] 跨层字段联动 - PathResolver
- [x] Linkage 串行计算和性能优化 - DAG 优化
- [x] 补充字段路径透明化的示例
- [x] 补充 schemaKey 跨层级字段依赖的示例
- [x] 为工具类和hook添加单元测试
  - [x] schemaParser
  - [x] PathResolver
  - [x] conditionEvaluator
  - [x] dependencyGraph
  - [x] schemaLinkageParser
  - [x] filterValueBySchema
  - [x] useLinkageManager
- [x] 确认 schemaLinkageParser 是否还有必要保留 - 要保留
- [x] 目前已经没有 useComputedFields 的实现方式，需要在文档中更新
- [x] 将联动目前存在的单条件和双条件分支两种使用方式，改为只保留双条件分支
- [x] 将 function 移动到 fulfill 和 otherwise 中
- [x] when 和 fulfill、otherwise 中的 function 都需要支持异步函数
- [x] linkage type 中的 computed 和 value 类型合并
- [x] 并行计算联动时确保不会因为某个计算失败影响其他计算任务
- [x] 修复表单初始化计算联动导致死循环的问题
- [x] 拆分 src/pages/DynamicFormExamples.tsx 中的示例代码到不同的文件
- [x] 嵌套表单 - JSON Pointer 跨层级示例切换公司类型时没有触发联动
- [x] 初始化和触发联动时根据依赖关系的拓扑顺序计算各个字段
- [x] DependencyGraph 中的 getAffectedFields 添加 affected 节点之前先判断是否已经添加过，避免重复添加
- [x] NestForm 文档补充 filterValueWithNestedSchemas 的相关逻辑
- [x] 当 flattenPath: true 时，中间层级不会渲染成 NestedFormWidget 和 Card，只有真正需要分组的字段才会显示 Card 边框
- [ ] 完善 DYNAMIC_FORM_PART2 文档中表单校验 JSON Schema 的内容
  - [ ] 5.4.6, 5.4.7 下方需要补充含义说明
  - [ ] 5.4.1 提到的 dependencies 是不是只能用于必填校验
  - [ ] if-else 分支判断和 anyOf/allOf/oneOf 判断中都只提到 required 校验，能否支持其他的校验方式（如 minLength, pattern 等）
  - [ ] 5.5.3 跨字段验证里为什么 schema 中还需要定义 "dependencies": ["password"]
  - [ ] 自定义格式和自定义关键字验证代码示例中的 Ajv 起到什么作用
- [ ] 支持 API Node 的场景方案
- [ ] type 为 object 类型的字段需要支持在 ui 字段中配置表单的 layout 是 vertical 还是 horizontal
- [ ] 确认 NestedForm 除了 object 之外是否支持 array 类型字段的渲染
- [ ] FormField 组件中有从传入的 widgets 和 FieldRegistry 两个来源获取 widget 的方法，这两种方法有何异同，是否只需要保留 FieldRegistry
- [ ] 添加自定义 nested form widget 的代码示例
- [ ] 大规模表单性能
- [ ] 文档与代码实现对齐
